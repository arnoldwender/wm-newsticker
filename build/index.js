(()=>{"use strict";var e,t={106(e,t,l){const n=window.React,a=window.wp.blocks,r=window.wp.i18n,o=window.wp.blockEditor,s=window.wp.components,c=window.wp.element,i=window.wp.apiFetch;var m=l.n(i);(0,a.registerBlockType)("wm/newsticker",{title:(0,r.__)("Newsticker","wm-newsticker"),description:(0,r.__)("Displays announcements in a ticker format with customizable links.","wm-newsticker"),category:"widgets",icon:"megaphone",keywords:[(0,r.__)("news","wm-newsticker"),(0,r.__)("ticker","wm-newsticker"),(0,r.__)("announcements","wm-newsticker")],supports:{html:!1,align:["wide","full"]},attributes:{items:{type:"array",default:[]},animationType:{type:"string",default:"scroll"},direction:{type:"string",default:"left"},speed:{type:"number",default:50},pauseOnHover:{type:"boolean",default:!0},backgroundColor:{type:"string",default:"#1a1a2e"},textColor:{type:"string",default:"#ffffff"},labelText:{type:"string",default:""},labelBackgroundColor:{type:"string",default:"#e94560"},labelTextColor:{type:"string",default:"#ffffff"},separator:{type:"string",default:"•"},fontSize:{type:"number",default:14},height:{type:"number",default:45},isRTL:{type:"boolean",default:!1},showControls:{type:"boolean",default:!1},showPlayPause:{type:"boolean",default:!0},showPrevNext:{type:"boolean",default:!0},showProgress:{type:"boolean",default:!1},controlsPosition:{type:"string",default:"right"},contentSource:{type:"string",default:"manual"},postType:{type:"string",default:"post"},postsCount:{type:"number",default:5},categoryIds:{type:"array",default:[]},tagIds:{type:"array",default:[]},orderBy:{type:"string",default:"date"},order:{type:"string",default:"DESC"},showDate:{type:"boolean",default:!1},dateFormat:{type:"string",default:"relative"},borderRadius:{type:"object",default:{top:"0px",right:"0px",bottom:"0px",left:"0px"}},padding:{type:"object",default:{top:"0px",right:"0px",bottom:"0px",left:"0px"}},margin:{type:"object",default:{top:"0px",right:"0px",bottom:"0px",left:"0px"}},borderWidth:{type:"string",default:"0px"},borderColor:{type:"string",default:"#000000"},borderStyle:{type:"string",default:"solid"},boxShadow:{type:"string",default:"none"}},edit:function({attributes:e,setAttributes:t}){const{items:l,animationType:a,direction:i,speed:w,pauseOnHover:p,backgroundColor:u,textColor:d,labelText:_,labelBackgroundColor:g,labelTextColor:b,separator:k,fontSize:h,height:v,isRTL:C,showControls:E,showPlayPause:f,showPrevNext:x,showProgress:y,controlsPosition:N,contentSource:S,postType:T,postsCount:P,categoryIds:B,tagIds:O,orderBy:F,order:R,showDate:D,dateFormat:L,borderRadius:$,padding:A,margin:z,borderWidth:I,borderColor:j,borderStyle:M,boxShadow:H}=e,[W,U]=(0,c.useState)([]),[q,G]=(0,c.useState)([]),[V,J]=(0,c.useState)([]),[K,Q]=(0,c.useState)([]),[X,Y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{m()({path:"/wm-newsticker/v1/post-types"}).then(e=>U(e)).catch(()=>U([{value:"post",label:"Post"}]))},[]),(0,c.useEffect)(()=>{m()({path:"/wp/v2/categories?per_page=100"}).then(e=>G(e.map(e=>({value:e.id,label:e.name})))).catch(()=>G([]))},[]),(0,c.useEffect)(()=>{m()({path:"/wp/v2/tags?per_page=100"}).then(e=>J(e.map(e=>({value:e.id,label:e.name})))).catch(()=>J([]))},[]),(0,c.useEffect)(()=>{if("posts"!==S)return void Q([]);Y(!0);let e=`/wp/v2/${T}?per_page=${P}&orderby=${F}&order=${R.toLowerCase()}`;B.length>0&&"post"===T&&(e+=`&categories=${B.join(",")}`),O.length>0&&"post"===T&&(e+=`&tags=${O.join(",")}`),m()({path:e}).then(e=>{Q(e.map(e=>({text:e.title.rendered,link:e.link}))),Y(!1)}).catch(()=>{Q([]),Y(!1)})},[S,T,P,B,O,F,R]);const Z=(0,r.__)("NEWS","wm-newsticker"),ee=(0,o.useBlockProps)({className:"wm-newsticker-editor"}),te=(e,n,a)=>{const r=l.map((t,l)=>l===e?{...t,[n]:a}:t);t({items:r})},le=(e,n)=>{const a=e+n;if(a<0||a>=l.length)return;const r=[...l];[r[e],r[a]]=[r[a],r[e]],t({items:r})},ne=_||Z,ae=[{label:(0,r.__)("Scroll (Marquee)","wm-newsticker"),value:"scroll"},{label:(0,r.__)("Fade","wm-newsticker"),value:"fade"},{label:(0,r.__)("Slide","wm-newsticker"),value:"slide"},{label:(0,r.__)("Typing","wm-newsticker"),value:"typing"}],re=[{label:(0,r.__)("Left","wm-newsticker"),value:"left"},{label:(0,r.__)("Right","wm-newsticker"),value:"right"},{label:(0,r.__)("Up","wm-newsticker"),value:"up"},{label:(0,r.__)("Down","wm-newsticker"),value:"down"}],oe=[{label:(0,r.__)("Left","wm-newsticker"),value:"left"},{label:(0,r.__)("Right","wm-newsticker"),value:"right"}],se=[{label:(0,r.__)("Manual announcements","wm-newsticker"),value:"manual"},{label:(0,r.__)("Recent posts","wm-newsticker"),value:"posts"}],ce=[{label:(0,r.__)("Date","wm-newsticker"),value:"date"},{label:(0,r.__)("Title","wm-newsticker"),value:"title"},{label:(0,r.__)("Last modified","wm-newsticker"),value:"modified"},{label:(0,r.__)("Random","wm-newsticker"),value:"rand"},{label:(0,r.__)("Comment count","wm-newsticker"),value:"comment_count"}],ie=[{label:(0,r.__)("Descending (newest first)","wm-newsticker"),value:"DESC"},{label:(0,r.__)("Ascending (oldest first)","wm-newsticker"),value:"ASC"}],me=[{label:(0,r.__)("Relative (e.g., 2 hours ago)","wm-newsticker"),value:"relative"},{label:(0,r.__)("Absolute (site format)","wm-newsticker"),value:"absolute"}],we="posts"===S?K:l;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.InspectorControls,null,(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Animation","wm-newsticker"),initialOpen:!0},(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Animation type","wm-newsticker"),value:a,options:ae,onChange:e=>t({animationType:e}),help:(0,r.__)("Choose how announcements are displayed","wm-newsticker")}),(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Direction","wm-newsticker"),value:i,options:re,onChange:e=>t({direction:e})}),(0,n.createElement)(s.RangeControl,{label:(0,r.__)("Speed","wm-newsticker"),value:w,onChange:e=>t({speed:e}),min:10,max:100,help:(0,r.__)("Higher value = faster","wm-newsticker")}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Pause on hover","wm-newsticker"),checked:p,onChange:e=>t({pauseOnHover:e})}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("RTL (Right-to-Left)","wm-newsticker"),checked:C,onChange:e=>t({isRTL:e}),help:(0,r.__)("Enable for Arabic, Hebrew, etc.","wm-newsticker")})),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Controls","wm-newsticker"),initialOpen:!1},(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Show controls","wm-newsticker"),checked:E,onChange:e=>t({showControls:e}),help:(0,r.__)("Display Play/Pause and Prev/Next buttons","wm-newsticker")}),E&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Controls position","wm-newsticker"),value:N,options:oe,onChange:e=>t({controlsPosition:e})}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Play/Pause button","wm-newsticker"),checked:f,onChange:e=>t({showPlayPause:e})}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Previous/Next buttons","wm-newsticker"),checked:x,onChange:e=>t({showPrevNext:e}),help:"scroll"===a?(0,r.__)("Only works with Fade/Slide/Typing animations","wm-newsticker"):""}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Progress indicator","wm-newsticker"),checked:y,onChange:e=>t({showProgress:e}),help:(0,r.__)("Shows a progress bar at the bottom","wm-newsticker")}))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("General Settings","wm-newsticker"),initialOpen:!1},(0,n.createElement)(s.TextControl,{label:(0,r.__)("Label text","wm-newsticker"),value:_,onChange:e=>t({labelText:e}),placeholder:Z,help:(0,r.__)("Leave empty to hide the label","wm-newsticker")}),"scroll"===a&&(0,n.createElement)(s.TextControl,{label:(0,r.__)("Separator","wm-newsticker"),value:k,onChange:e=>t({separator:e})}),(0,n.createElement)(s.RangeControl,{label:(0,r.__)("Font size (px)","wm-newsticker"),value:h,onChange:e=>t({fontSize:e}),min:10,max:24}),(0,n.createElement)(s.RangeControl,{label:(0,r.__)("Height (px)","wm-newsticker"),value:v,onChange:e=>t({height:e}),min:30,max:80})),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Colors","wm-newsticker"),initialOpen:!1},(0,n.createElement)("div",{className:"wm-color-controls"},(0,n.createElement)(s.BaseControl,{label:(0,r.__)("Ticker background","wm-newsticker"),className:"wm-color-control"},(0,n.createElement)("div",{className:"wm-color-input-row"},(0,n.createElement)("input",{type:"color",value:u,onChange:e=>t({backgroundColor:e.target.value})}),(0,n.createElement)(s.TextControl,{value:u,onChange:e=>t({backgroundColor:e}),className:"wm-color-text"}))),(0,n.createElement)(s.BaseControl,{label:(0,r.__)("Text color","wm-newsticker"),className:"wm-color-control"},(0,n.createElement)("div",{className:"wm-color-input-row"},(0,n.createElement)("input",{type:"color",value:d,onChange:e=>t({textColor:e.target.value})}),(0,n.createElement)(s.TextControl,{value:d,onChange:e=>t({textColor:e}),className:"wm-color-text"}))),(0,n.createElement)(s.BaseControl,{label:(0,r.__)("Label background","wm-newsticker"),className:"wm-color-control"},(0,n.createElement)("div",{className:"wm-color-input-row"},(0,n.createElement)("input",{type:"color",value:g,onChange:e=>t({labelBackgroundColor:e.target.value})}),(0,n.createElement)(s.TextControl,{value:g,onChange:e=>t({labelBackgroundColor:e}),className:"wm-color-text"}))),(0,n.createElement)(s.BaseControl,{label:(0,r.__)("Label text","wm-newsticker"),className:"wm-color-control"},(0,n.createElement)("div",{className:"wm-color-input-row"},(0,n.createElement)("input",{type:"color",value:b,onChange:e=>t({labelTextColor:e.target.value})}),(0,n.createElement)(s.TextControl,{value:b,onChange:e=>t({labelTextColor:e}),className:"wm-color-text"}))),(0,n.createElement)(s.BaseControl,{label:(0,r.__)("Border color","wm-newsticker"),className:"wm-color-control"},(0,n.createElement)("div",{className:"wm-color-input-row"},(0,n.createElement)("input",{type:"color",value:j,onChange:e=>t({borderColor:e.target.value})}),(0,n.createElement)(s.TextControl,{value:j,onChange:e=>t({borderColor:e}),className:"wm-color-text"}))))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Spacing & Borders","wm-newsticker"),initialOpen:!1},(0,n.createElement)(s.__experimentalBoxControl,{label:(0,r.__)("Padding","wm-newsticker"),values:A,onChange:e=>t({padding:e}),units:[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}]}),(0,n.createElement)(s.__experimentalBoxControl,{label:(0,r.__)("Margin","wm-newsticker"),values:z,onChange:e=>t({margin:e}),units:[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}]}),(0,n.createElement)(s.__experimentalBoxControl,{label:(0,r.__)("Border Radius","wm-newsticker"),values:$,onChange:e=>t({borderRadius:e}),units:[{value:"px",label:"px"},{value:"%",label:"%"}]}),(0,n.createElement)(s.Flex,{gap:2},(0,n.createElement)(s.FlexBlock,null,(0,n.createElement)(s.__experimentalUnitControl,{label:(0,r.__)("Border Width","wm-newsticker"),value:I,onChange:e=>t({borderWidth:e}),units:[{value:"px",label:"px"}]})),(0,n.createElement)(s.FlexBlock,null,(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Border Style","wm-newsticker"),value:M,options:[{label:(0,r.__)("Solid","wm-newsticker"),value:"solid"},{label:(0,r.__)("Dashed","wm-newsticker"),value:"dashed"},{label:(0,r.__)("Dotted","wm-newsticker"),value:"dotted"},{label:(0,r.__)("None","wm-newsticker"),value:"none"}],onChange:e=>t({borderStyle:e})}))),(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Box Shadow","wm-newsticker"),value:H,options:[{label:(0,r.__)("None","wm-newsticker"),value:"none"},{label:(0,r.__)("Small","wm-newsticker"),value:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)"},{label:(0,r.__)("Medium","wm-newsticker"),value:"0 3px 6px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.12)"},{label:(0,r.__)("Large","wm-newsticker"),value:"0 10px 20px rgba(0,0,0,0.15), 0 3px 6px rgba(0,0,0,0.10)"},{label:(0,r.__)("Inset","wm-newsticker"),value:"inset 0 2px 4px rgba(0,0,0,0.1)"}],onChange:e=>t({boxShadow:e})})),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Content Source","wm-newsticker"),initialOpen:!0},(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Source","wm-newsticker"),value:S,options:se,onChange:e=>t({contentSource:e})}),"posts"===S&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Post type","wm-newsticker"),value:T,options:W.length>0?W:[{value:"post",label:"Post"}],onChange:e=>t({postType:e})}),(0,n.createElement)(s.RangeControl,{label:(0,r.__)("Number of posts","wm-newsticker"),value:P,onChange:e=>t({postsCount:e}),min:1,max:20}),"post"===T&&q.length>0&&(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Filter by category","wm-newsticker"),value:B.length>0?B[0]:"",options:[{value:"",label:(0,r.__)("All categories","wm-newsticker")},...q],onChange:e=>t({categoryIds:e?[parseInt(e)]:[]}),help:(0,r.__)("Select a category to filter posts","wm-newsticker")}),"post"===T&&V.length>0&&(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Filter by tag","wm-newsticker"),value:O.length>0?O[0]:"",options:[{value:"",label:(0,r.__)("All tags","wm-newsticker")},...V],onChange:e=>t({tagIds:e?[parseInt(e)]:[]})}),(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Order by","wm-newsticker"),value:F,options:ce,onChange:e=>t({orderBy:e})}),(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Order","wm-newsticker"),value:R,options:ie,onChange:e=>t({order:e})}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Show date","wm-newsticker"),checked:D,onChange:e=>t({showDate:e})}),D&&(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Date format","wm-newsticker"),value:L,options:me,onChange:e=>t({dateFormat:e})}),X&&(0,n.createElement)("div",{className:"wm-newsticker-loading"},(0,n.createElement)(s.Spinner,null)," ",(0,r.__)("Loading posts...","wm-newsticker")),!X&&K.length>0&&(0,n.createElement)(s.Notice,{status:"info",isDismissible:!1},(0,r.__)("Preview:","wm-newsticker")," ",K.length," ",(0,r.__)("posts found","wm-newsticker")),!X&&0===K.length&&"posts"===S&&(0,n.createElement)(s.Notice,{status:"warning",isDismissible:!1},(0,r.__)("No posts found with current filters","wm-newsticker"))),"manual"===S&&(0,n.createElement)(n.Fragment,null,l.map((e,a)=>(0,n.createElement)("div",{key:a,className:"wm-newsticker-item-panel"},(0,n.createElement)(s.Flex,{align:"flex-start"},(0,n.createElement)(s.FlexBlock,null,(0,n.createElement)(s.TextControl,{label:(0,r.__)("Announcement text","wm-newsticker")+` #${a+1}`,value:e.text,onChange:e=>te(a,"text",e)}),(0,n.createElement)(s.TextControl,{label:(0,r.__)("Link (optional)","wm-newsticker"),value:e.link,onChange:e=>te(a,"link",e),type:"url"}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Open in new tab","wm-newsticker"),checked:e.newTab||!1,onChange:e=>te(a,"newTab",e)})),(0,n.createElement)(s.FlexItem,null,(0,n.createElement)("div",{className:"wm-newsticker-item-controls"},(0,n.createElement)(s.Button,{icon:"arrow-up",onClick:()=>le(a,-1),disabled:0===a,size:"small",label:(0,r.__)("Move up","wm-newsticker")}),(0,n.createElement)(s.Button,{icon:"arrow-down",onClick:()=>le(a,1),disabled:a===l.length-1,size:"small",label:(0,r.__)("Move down","wm-newsticker")}),(0,n.createElement)(s.Button,{icon:"trash",onClick:()=>(e=>{const n=l.filter((t,l)=>l!==e);t({items:n})})(a),isDestructive:!0,size:"small",label:(0,r.__)("Delete","wm-newsticker")})))))),(0,n.createElement)(s.Button,{variant:"primary",onClick:()=>{const e=[...l,{text:"",link:"",newTab:!1}];t({items:e})},icon:"plus",style:{marginTop:"10px"}},(0,r.__)("Add announcement","wm-newsticker")))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("About","wm-newsticker"),initialOpen:!1},(0,n.createElement)("div",{className:"wm-newsticker-credits"},(0,n.createElement)("p",null,(0,n.createElement)("strong",null,"WM Newsticker")),(0,n.createElement)("p",{className:"wm-newsticker-version"},"Version 1.4.4")))),(0,n.createElement)("div",{...ee},(0,n.createElement)("div",{className:`wm-newsticker-preview wm-animation-${a}${C?" wm-rtl":""}${E?" wm-has-controls wm-controls-"+N:""}`,style:{backgroundColor:u,height:`${v}px`}},(_||""===_)&&(0,n.createElement)("div",{className:"wm-newsticker-label",style:{backgroundColor:g,color:b,fontSize:`${h}px`,display:""===_?"none":"flex"}},ne),E&&"left"===N&&(0,n.createElement)("div",{className:"wm-newsticker-controls-preview",style:{color:d}},x&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"◀"),f&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"⏸"),x&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"▶")),(0,n.createElement)("div",{className:"wm-newsticker-content"},y&&(0,n.createElement)("div",{className:"wm-newsticker-progress-preview"},(0,n.createElement)("div",{className:"wm-newsticker-progress-bar-preview"})),0===we.length?(0,n.createElement)("span",{className:"wm-newsticker-placeholder",style:{color:d,fontSize:`${h}px`}},"posts"===S?X?(0,r.__)("Loading...","wm-newsticker"):(0,r.__)("No posts found","wm-newsticker"):(0,r.__)("Add announcements in the sidebar →","wm-newsticker")):(0,n.createElement)("div",{className:"wm-newsticker-track",style:{color:d,fontSize:`${h}px`}},we.map((e,t)=>(0,n.createElement)("span",{key:t},t>0&&"scroll"===a&&(0,n.createElement)("span",{className:"wm-newsticker-separator"},` ${k} `),(0,n.createElement)("span",{className:e.link?"has-link":""},e.text||(0,r.__)("(No text)","wm-newsticker")))))),E&&"right"===N&&(0,n.createElement)("div",{className:"wm-newsticker-controls-preview",style:{color:d}},x&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"◀"),f&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"⏸"),x&&(0,n.createElement)("span",{className:"wm-ctrl-icon"},"▶")),(0,n.createElement)("div",{className:"wm-newsticker-animation-badge"},"posts"===S?"POSTS":a.toUpperCase()))))},save:function(){return null}})}},l={};function n(e){var a=l[e];if(void 0!==a)return a.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,l,a,r)=>{if(!l){var o=1/0;for(m=0;m<e.length;m++){for(var[l,a,r]=e[m],s=!0,c=0;c<l.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every(e=>n.O[e](l[c]))?l.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(m--,1);var i=a();void 0!==i&&(t=i)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[l,a,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,l)=>{var a,r,[o,s,c]=l,i=0;if(o.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var m=c(n)}for(t&&t(l);i<o.length;i++)r=o[i],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(m)},l=globalThis.webpackChunkwm_newsticker=globalThis.webpackChunkwm_newsticker||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=n.O(void 0,[350],()=>n(106));a=n.O(a)})();